(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{CKRj:function(t,e,i){"use strict";i.r(e),i.d(e,"TrainingModule",(function(){return W}));var n=i("PCNd"),c=i("tyNb"),a=i("fXoL"),r=i("vEl1"),s=i("ofXK"),o=i("wZkO"),b=i("y8OW"),l=i("XiUz"),u=i("3Pt+"),m=i("Wp6s"),g=i("kmnG"),d=i("d3UM"),p=i("FKr1"),f=i("Xa2L"),h=i("bTqV");function S(t,e){if(1&t&&(a.Tb(0,"mat-option",11),a.Ac(1),a.Sb()),2&t){const t=e.$implicit;a.lc("value",t.id),a.Bb(1),a.Cc(" ",t.name," ")}}function y(t,e){if(1&t&&(a.Tb(0,"mat-form-field",8),a.Tb(1,"mat-label"),a.Ac(2,"Pick an exercise"),a.Sb(),a.Tb(3,"mat-select",9),a.yc(4,S,2,2,"mat-option",10),a.Sb(),a.Sb()),2&t){const t=a.fc();a.Bb(4),a.lc("ngForOf",t.exercises)}}function x(t,e){1&t&&a.Ob(0,"mat-spinner")}function T(t,e){if(1&t&&(a.Tb(0,"button",14),a.Ac(1," Start "),a.Sb()),2&t){a.fc(2);const t=a.qc(2);a.lc("disabled",t.invalid)}}function v(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",15),a.bc("click",(function(){return a.sc(t),a.fc(2).fetchExercises()})),a.Ac(1," Fetch again "),a.Sb()}}function w(t,e){if(1&t&&(a.Tb(0,"mat-card-actions",4),a.yc(1,T,2,1,"button",12),a.yc(2,v,2,0,"button",13),a.Sb()),2&t){const t=a.fc();a.Bb(1),a.lc("ngIf",t.exercises),a.Bb(1),a.lc("ngIf",!t.exercises)}}let C=(()=>{class t{constructor(t,e){this.trainingService=t,this.uiService=e,this.isLoading=!1}ngOnInit(){this.loadingSub=this.uiService.loadingStateChanged.subscribe(t=>{this.isLoading=t}),this.exerciseSubscription=this.trainingService.exercisesChanged.subscribe(t=>{this.exercises=t}),this.fetchExercises()}fetchExercises(){this.trainingService.cancelFbSubs(),this.trainingService.fetchAvailableExercises()}onStartTraining(t){this.trainingService.startExercise(t.value.exercise)}ngOnDestroy(){this.exerciseSubscription&&this.exerciseSubscription.unsubscribe(),this.loadingSub&&this.loadingSub.unsubscribe(),this.trainingService.cancelFbSubs()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.a),a.Nb(b.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-new-training"]],decls:10,vars:3,consts:[["fxLayout","","fxLayoutAlign","center",1,"new-training"],[3,"ngSubmit"],["f","ngForm"],["fxFlex","100%","fxFlex.gt-xs","400px"],["fxLayoutAlign","center"],["appearance","standard",4,"ngIf"],[4,"ngIf"],["fxLayoutAlign","center",4,"ngIf"],["appearance","standard"],["ngModel","","name","exercise","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-raised-button","","type","submit","color","primary",3,"disabled",4,"ngIf"],["mat-raised-button","","type","button","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["mat-raised-button","","type","button","color","primary",3,"click"]],template:function(t,e){if(1&t){const t=a.Ub();a.Tb(0,"section",0),a.Tb(1,"form",1,2),a.bc("ngSubmit",(function(){a.sc(t);const i=a.qc(2);return e.onStartTraining(i)})),a.Tb(3,"mat-card",3),a.Tb(4,"mat-card-title",4),a.Ac(5,"Time to start a workout"),a.Sb(),a.Tb(6,"mat-card-content",4),a.yc(7,y,5,1,"mat-form-field",5),a.yc(8,x,1,0,"mat-spinner",6),a.Sb(),a.yc(9,w,3,2,"mat-card-actions",7),a.Sb(),a.Sb(),a.Sb()}2&t&&(a.Bb(7),a.lc("ngIf",!e.isLoading&&e.exercises),a.Bb(1),a.lc("ngIf",e.isLoading),a.Bb(1),a.lc("ngIf",!e.isLoading))},directives:[l.c,l.b,u.s,u.m,u.n,m.a,l.a,m.e,m.c,s.m,g.c,g.g,d.a,u.l,u.o,u.q,s.l,p.n,f.c,m.b,h.a],styles:[".new-training[_ngcontent-%COMP%]{padding:20px}"]}),t})();var A=i("+0xr"),B=i("Dh3D"),O=i("M9IT"),I=i("qFsG");function D(t,e){1&t&&(a.Tb(0,"mat-header-cell",15),a.Ac(1,"Date"),a.Sb())}function L(t,e){if(1&t&&(a.Tb(0,"mat-cell"),a.Ac(1),a.gc(2,"date"),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Bc(a.hc(2,1,t.date.toDate()))}}function E(t,e){1&t&&(a.Tb(0,"mat-header-cell",15),a.Ac(1,"Name"),a.Sb())}function F(t,e){if(1&t&&(a.Tb(0,"mat-cell"),a.Ac(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Bc(t.name)}}function k(t,e){1&t&&(a.Tb(0,"mat-header-cell",15),a.Ac(1,"Calories"),a.Sb())}function R(t,e){if(1&t&&(a.Tb(0,"mat-cell"),a.Ac(1),a.gc(2,"number"),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Bc(a.ic(2,1,t.calories,"1.0-2"))}}function N(t,e){1&t&&(a.Tb(0,"mat-header-cell",15),a.Ac(1,"Duration"),a.Sb())}function H(t,e){if(1&t&&(a.Tb(0,"mat-cell"),a.Ac(1),a.gc(2,"number"),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Bc(a.ic(2,1,t.duration,"1.0-2"))}}function q(t,e){1&t&&(a.Tb(0,"mat-header-cell"),a.Ac(1,"State"),a.Sb())}function z(t,e){if(1&t&&(a.Tb(0,"mat-cell"),a.Ac(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Bc(t.state)}}function K(t,e){1&t&&a.Ob(0,"mat-header-row")}function M(t,e){1&t&&a.Ob(0,"mat-row")}const P=function(){return[5,10,25,100]};let Q=(()=>{class t{constructor(t){this.trainingService=t,this.displayedColumns=["date","name","duration","calories","state"],this.dataSource=new A.k}ngOnInit(){this.exChangedSubscription=this.trainingService.finishedExercisesChanged.subscribe(t=>{this.dataSource.data=t}),this.trainingService.fetchCompletedOrCancelledExercises()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}doFilter(t){this.dataSource.filter=t.trim().toLocaleLowerCase()}ngOnDestroy(){this.exChangedSubscription&&this.exChangedSubscription.unsubscribe(),this.trainingService.cancelFbSubs()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-past-trainings"]],viewQuery:function(t,e){var i;1&t&&(a.Ec(B.a,!0),a.Ec(O.a,!0)),2&t&&(a.pc(i=a.cc())&&(e.sort=i.first),a.pc(i=a.cc())&&(e.paginator=i.first))},decls:22,vars:6,consts:[["fxLayoutAlign","center center"],["appearance","standard","fxFlex","40%"],["matInput","","type","text","placeholder","Filter",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-sort-header",""]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"mat-form-field",1),a.Tb(2,"input",2),a.bc("keyup",(function(t){return e.doFilter(t.target.value)})),a.Sb(),a.Sb(),a.Sb(),a.Tb(3,"mat-table",3),a.Rb(4,4),a.yc(5,D,2,0,"mat-header-cell",5),a.yc(6,L,3,3,"mat-cell",6),a.Qb(),a.Rb(7,7),a.yc(8,E,2,0,"mat-header-cell",5),a.yc(9,F,2,1,"mat-cell",6),a.Qb(),a.Rb(10,8),a.yc(11,k,2,0,"mat-header-cell",5),a.yc(12,R,3,4,"mat-cell",6),a.Qb(),a.Rb(13,9),a.yc(14,N,2,0,"mat-header-cell",5),a.yc(15,H,3,4,"mat-cell",6),a.Qb(),a.Rb(16,10),a.yc(17,q,2,0,"mat-header-cell",11),a.yc(18,z,2,1,"mat-cell",6),a.Qb(),a.yc(19,K,1,0,"mat-header-row",12),a.yc(20,M,1,0,"mat-row",13),a.Sb(),a.Ob(21,"mat-paginator",14)),2&t&&(a.Bb(3),a.lc("dataSource",e.dataSource),a.Bb(16),a.lc("matHeaderRowDef",e.displayedColumns),a.Bb(1),a.lc("matRowDefColumns",e.displayedColumns),a.Bb(1),a.lc("pageSize",10)("pageSizeOptions",a.mc(5,P)))},directives:[l.b,g.c,l.a,I.b,A.j,B.a,A.c,A.e,A.b,A.g,A.i,O.a,A.d,B.b,A.a,A.f,A.h],pipes:[s.e,s.f],styles:[""]}),t})();var $=i("0IaG");let j=(()=>{class t{constructor(t){this.passedData=t}}return t.\u0275fac=function(e){return new(e||t)(a.Nb($.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-stop-training"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-raised-button","",3,"mat-dialog-close"],["mat-raised-button","","color","accent",3,"mat-dialog-close"]],template:function(t,e){1&t&&(a.Tb(0,"h1",0),a.Ac(1,"Are you sure?"),a.Sb(),a.Tb(2,"mat-dialog-content"),a.Ac(3),a.Sb(),a.Tb(4,"mat-dialog-actions"),a.Tb(5,"button",1),a.Ac(6,"Yes"),a.Sb(),a.Tb(7,"button",2),a.Ac(8,"No"),a.Sb(),a.Sb()),2&t&&(a.Bb(3),a.Cc("You've already got ",e.passedData.progress,"%"),a.Bb(2),a.lc("mat-dialog-close",!0),a.Bb(2),a.lc("mat-dialog-close",!1))},directives:[$.g,$.e,$.c,h.a,$.d],encapsulation:2}),t})(),G=(()=>{class t{constructor(t,e){this.dialog=t,this.trainingService=e,this.progress=0}ngOnInit(){this.startOrResumeTimer()}onStop(){clearInterval(this.timer),this.dialog.open(j,{data:{progress:this.progress}}).afterClosed().subscribe(t=>{t?this.trainingService.cancelExercise(this.progress):this.startOrResumeTimer()})}startOrResumeTimer(){const t=this.trainingService.getRunningExercise().duration/100*1e3;this.timer=setInterval(()=>{this.progress=this.progress+1,this.progress>=100&&(this.trainingService.completeExercise(),clearInterval(this.timer))},t)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb($.b),a.Nb(r.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","15px",1,"current-training"],["mode","determinate",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(a.Tb(0,"section",0),a.Ob(1,"mat-progress-spinner",1),a.Tb(2,"h1"),a.Ac(3),a.Sb(),a.Tb(4,"p"),a.Ac(5,"Keep on going, you can do it!"),a.Sb(),a.Tb(6,"button",2),a.bc("click",(function(){return e.onStop()})),a.Ac(7,"Stop"),a.Sb(),a.Sb()),2&t&&(a.Bb(1),a.lc("value",e.progress),a.Bb(2),a.Cc("",e.progress,"%"))},directives:[l.c,l.b,l.d,f.a,h.a],styles:[".current-training[_ngcontent-%COMP%]{padding:20px}"]}),t})();function U(t,e){1&t&&(a.Tb(0,"mat-tab-group"),a.Tb(1,"mat-tab",2),a.Ob(2,"app-new-training"),a.Sb(),a.Tb(3,"mat-tab",3),a.Ob(4,"app-past-trainings"),a.Sb(),a.Sb())}function X(t,e){1&t&&a.Ob(0,"app-current-training")}const J=[{path:"",component:(()=>{class t{constructor(t){this.trainingService=t,this.ongoingTraining=!1}ngOnInit(){this.exerciseSubscription=this.trainingService.exerciseChanged.subscribe(t=>{this.ongoingTraining=!!t})}ngOnDestroy(){this.exerciseSubscription&&this.exerciseSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-training"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["ongoingTrainingBlock",""],["label","New Exercise"],["label","Past Exercises"]],template:function(t,e){if(1&t&&(a.yc(0,U,5,0,"mat-tab-group",0),a.yc(1,X,1,0,"ng-template",null,1,a.zc)),2&t){const t=a.qc(2);a.lc("ngIf",!e.ongoingTraining)("ngIfElse",t)}},directives:[s.m,o.b,o.a,C,Q,G],styles:[""]}),t})()}];let V=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[c.c.forChild(J)],c.c]}),t})(),W=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[n.a,V]]}),t})()}}]);